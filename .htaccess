# Okarowok Wibye Acel — URL Rewriting
# Enables clean URLs for the blog and other pages

RewriteEngine On
RewriteBase /

# --- Page Routes ---

# /about/ → about.html
RewriteRule ^about/?$ about.html [L,QSA]

# /gallery/ → gallery.html
RewriteRule ^gallery/?$ gallery.html [L,QSA]

# /activities/ → activities.html
RewriteRule ^activities/?$ activities.html [L,QSA]

# /project/ → project.html
RewriteRule ^project/?$ project.html [L,QSA]

# --- Blog Routes ---

# /blog/page/2/ → blog/index.php?page=2
RewriteRule ^blog/page/([0-9]+)/?$ blog/index.php?page=$1 [L,QSA]

# /blog/some-post-slug/ → blog/post.php?slug=some-post-slug
RewriteRule ^blog/([a-z0-9-]+)/?$ blog/post.php?slug=$1 [L,QSA]

# /blog/ → blog/index.php
RewriteRule ^blog/?$ blog/index.php [L,QSA]

# --- Backward Compatibility ---

# Redirect old blog.html to new /blog/ URL
RewriteRule ^blog\.html$ /blog/ [R=301,L]

# --- Admin Routes ---

# /admin/ → admin/index.php
RewriteRule ^admin/?$ admin/index.php [L,QSA]

# /admin/dashboard → admin/dashboard.php
RewriteRule ^admin/dashboard/?$ admin/dashboard.php [L,QSA]

# /admin/post → admin/post.php
RewriteRule ^admin/post/?$ admin/post.php [L,QSA]

# /admin/process → admin/process.php
RewriteRule ^admin/process/?$ admin/process.php [L,QSA]

# /admin/upload → admin/upload.php
RewriteRule ^admin/upload/?$ admin/upload.php [L,QSA]

# --- Security ---

# Prevent direct access to Markdown content files
RewriteRule ^content/ - [F,L]

# Prevent direct access to cache directory
RewriteRule ^cache/ - [F,L]

# Prevent direct access to includes directory (except from PHP)
RewriteRule ^includes/ - [F,L]

# --- Fallback 404 Handler ---
# If no rewrite rule matches, serve 404.php
ErrorDocument 404 /404.php
